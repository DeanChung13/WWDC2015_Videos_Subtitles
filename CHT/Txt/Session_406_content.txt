UI Testing在Xcode
早上好
歡迎來到XcodeXcode的用戶界面測試
我的名字是威爾·特納
這位是布魯克·柯蘭翰
我們倆都一起在研發Xcode的開發工具
我們今天非常激動因爲因爲我們今天要和你們分享
一個在Xcode開發工具測試技術上的
很大的突破
就是用戶界面的測試
通過用戶界面的測試 您可以找到用戶界面的一些元素,
與 他們互動 並驗證並驗證用戶界面屬性的狀態 
除了用戶界面測試 我們我們已經介紹了用戶界面記錄
這將允許 您爲 您的項目
快速設定用戶界面測試 
最後 我們已經更新了在Xcode的測試報告 
顯示了通過和失敗的和測試的結果 
以適應用戶界面測試的新的數據
所以我想談談核心技術
對於用戶界面測試 首先是 XC測試test 
其次是輔助功能 
所以XC測試test是Xcode的測試框架 
在它的裏面  您創建測試用例的子類
您執行測試方法 並並用斷言來驗證
您期望的結果是正確的 
XCte測試st集成Xcode 這意味着 您可以
通過這個用戶名完成編碼、 測試 
和直接從 您的原始編碼
測試的能力 和並直接就在那裏看到結果 
您也通過Xcode Server得到連續整合
和Xcodebuild 創建
最後 XC測試test支持Swift和Objective-C
所以 您可以選擇 您最適合的
母語編碼語言
Xctest測試在Xcode 5裏是
作爲一個單元測試框架存在的 
在Xcode 6裏 我們擴大了 支持的性能測試 
這讓 您能捕捉到 您的編碼中的迴歸 
並確保 繼續
在每次發佈時都有最佳表現 
現在的Xcode 7
我們已經介紹了您可以使用的用戶界面測試的
的正確性和性能測試 
這就是XCtest 測試
現在讓我們再來看一看在輔助功能 
輔助功能是在我們的平臺上的
這給不啓用的用戶在我們的設備設備和所有其他用戶接受
我們的應用上提供同樣體驗的
一種技術 
爲了能夠達到輔助功能  提供了豐富的關於用戶界面的
語義數據的設定這種技術可用語音
來引導用戶使用這個應用 
用戶界面測試使用 和和輔助功能與用戶界面工具包
和應用程序包的整合 所以 當 您使用這些框架中的控制
您會馬上就能得到大量的免費的
可訪問支持 
還提供應用程序接口來讓 您可以
微調輔助功能的數據 
這裏的的關鍵是使用用戶界面測試 
您的測試將與應用程序進行
像普通用戶一樣的互動互動 
用戶界面測試有幾個要求
您應該需要了解 
首先是 取決於在操作系統中的新功能 
如果您用的是iOS 則需要iOS 9
如果您用X操作系統 則需要操作系統10和.11 
用戶界面測試保護保護您的隱私 
這樣做意味着 您需要啓用iOS設備
纔可以爲開發和連接一個受信的運行主機Xcode 
在X操作系統上  您需要給一個特殊的Xcode
幫助程式許可 第一次運行用戶界面測試時
會有提示 您這麼做 
讓我們來看看什麼在 您的項目開始用戶界面測試時
需要做些什麼 
首先 有一個新的Xcode的目標類型 
傳統來說上 單元測試是在Xcode中特定的目標類型 
現在用戶界面測試也是目標類型 
我們還爲 您介紹了一大套的新的應用程序接口
作爲用戶界面測試和用戶界面記錄 
這將使 您很快就可以開始了 
因此 Xcode測試目標支持用戶界面測試的
特殊要求 
這包括執行 您正在測試的應用程序中的
一個單獨的程序 
也處理隱私保護中使用
使用輔助功能的許可權 
這些目標都有Cocoa和CocoaTouch新的範本
而且這個的助手和都會將根據 您喜歡的方式
設定好開始 
有一個目標要測試用戶界面測試包的設定
以確定 您正在測試的應用程序 
新的應用程序接口有三個重點類別 
首先是應用程序 
其次是元素 
第三是元素查詢 
我們將稍後將對這些應用程序接口
進行一次深入的介紹 
用戶界面記錄讓您與您的應用程序 掌上設備
掌上設備模擬器 或OS XMac 
進行互動 
當 您這樣做時   生成必要的編碼
重建這些相互作​​用 
您可以新建測試測試或擴展現有測試 
讓我們來看看這是什麼 
布魯克 讓我們看看一個快速演示 
謝謝 威爾 
所以 事不宜遲 
我今天的演示所使用的項目
是李斯特的應用 
這個例子項目
您可以從developer.apple.com下載
那麼我們開始 現在現在我的目標配置
正是我想要的那樣 但但我想指出的是
要測試的目標是李斯特應用 
這是一個我的測試將能夠
與之互動的應用程序 
所以現在我得到了我的新的測試類別 
這裏還有一個小測試方法方法和設定功能
這將會被使用
會在我的測試方法被使用之前啓動應用程序 
我在這個類別下所添加的所有測試方法
都會這麼做 
所以在讓我們從李斯特A應用裏PP裏添加一個新的測試 
我要把鼠標移到方法中 按一下
按一下調試欄裏的記錄按鈕 
現在 Xcode已經開始啓動我的應用程序了 
啓動好了 
李斯特應用允許我來管理一系列的清單 
因此可能人們做的最常見的事情是
從他們的名單中補充、刪除項目 
所以我要點擊這裏 添加項目 
看起來我們在這食品雜貨清單中
有很多東西 
那我添加餅乾 
您可以看到 當我在打字時
源標題正在更新 
如果我按刪除  也從文字欄裏刪除
我刪除的東西 
下一件我要做的事
就是點擊一下餅乾項目
把 標記爲完成 
我要做的另一件事是
從清單中刪除項目 
所以我點擊編輯 然後刪除餅乾 
刪除確認 終於完成 
好 現在我有一個簡單的測試從名單上
從名單上添加、移除項目 
所以我點擊停止
讓我們看看什麼情況 
新增了餅乾
並且正在移除  
我們完成了 
謝謝 當測試與用戶界面元素進行互動的時候 
我們得到間接的驗證這些用戶界面元素的存在 
但我們沒辦法得到驗證的是
事物更改應用程序的狀態 
例如 當我們打開那個餅乾按鈕 
我們沒有得到任何驗證該按鈕的狀態
實際上改變了 
後來的測試中 當你點擊
確認刪除的按鈕時 
我們知道刪除確認按鈕已經被點擊了 
但運行測試無法驗證
餅乾那一行實際上被刪除了 
所以要得到這些驗證的話 
我需要添加一些斷言 
首先我要做的是添加一個斷言
說這裏的餅乾按鈕實際上已經改變了 的狀態 
要這樣做的話 我會我會添加一個新的常數 
稱這個爲餅乾按鈕吧 
我將要改變這個測試
就要點擊這個常數 
現在 要新增我的斷言我需要一些狀態 
一些元素屬性的斷言 
還有餅乾按鈕是XUI元素的
還有XUI元素有一個價值的屬性 
我要做什麼 我要我要在這裏設定中斷點 
並將測試運行到該點 
所以我們在這裏有測試狀態了
裏面有添加餅乾那一行 
還沒有點擊按鈕 
所以我要在調試器那裏 
列印出這個餅乾按鈕的數值 
--好 
我可以看到餅乾按鈕的的價值是
數位爲零的字串 
下一步我要跨過那條線 
所以現在 點擊了餅乾按鈕 
我又一次將列印出 的數值 現在我可以看到
該按鈕的值是數字一的字串 
好 所以現在我有了我需要的一切資訊
要斷言當 被點擊時按鈕的數值會變化 
所以我要用XCT
斷言平衡assertequal來添加一個斷言 
我會斷言被點擊後的數值
是一個數字爲一的字串 
這個值現在是任何的類型 
所以我需要斷言這是一個字串 
所以我使用字串 
並斷言 被點擊後是”“一”“ 
而且我斷言 被點擊前是
數字零的數位字串 
最後
當當刪除按鈕確認後
我就斷言餅乾那行消失 
我啓用XCT
斷言平衡assert equal並斷言
這個按鈕就不再存在了 
現在 如果我再運行這個測試我們我們應該看到同樣的東西
但也通過所有的這些斷言 
好 我現在剛剛添加了我的第一次測試 
交給  了 威爾 
<br/> 那相當厲害 
您可以看到布魯克就像普通用戶一樣
非常容易地使用這個應用 
而且在很短的時間內就創建了一個測試 
他可以拓展那個測試用XCT 斷言assert來
做了一些額外的驗證就可以用最少小的功夫
給他的項目增加可靠性 
那是相當令人興奮的 
所以 您可以看到我們新增的用戶界面測試目標 
非常簡單明瞭 就像就像我們所有其 他目標 
是有幫助和範本的 
使用記錄 與應用程序互動 創建使用元素、
綜合事件的編碼
然後用XCT斷言來驗證 
讓我們來看一看這個用戶界面測試 
我之前提到過有三個類別 
xxx<br/><br/><br/>他們是XCUIApplication
XCUIElement 和
XCUIElementquery
他們是如何工作的？
讓我們從一個非常簡單 
比布魯克的例子更簡單的例子 
一行一行地演示給你們看
首先我先啓動
應用對象 
這是一個我的應用代理 
然後我啓動  
啓動好了 
然後我用元素和查詢去找添加按鈕 
然後我點擊綜合事件 
最後 我加上了一個像布魯克那樣的斷言
來確保用戶界面在測試結束時
有了預期的狀態 
所以我提到UIApplication應用程序
是一個爲測試應用程序的代理 
的啓動和關閉的
週期是獨立的 
因爲 您的測試是在一個單獨的過程中運行 
您可以明確地控制應用程序什麼時候啓動
及和什麼時候被終止 
當 您啓動時 總是產生一個新的程序 
所以這就是爲什麼我們
不給 您完全的程序 因爲 您有很多
需要 您操控的應用在運行 
但通過每次乾淨無幹擾的地啓動 
我們幫 您將 您的測試中
必須要處理的變數最小化 
所以 如果 已經運行 
再次啓動將終止先前正在運行的實體 
應用也是尋找元素的開始 
讓我們談一談元素 
XCUIElement元素
就像應用程序 是一個代理對象 
但這一次是作爲測試應用中的
用戶界面元素 
元素有幾種類型 
有的類型是按鈕 或或格子、 或視窗 等等 
它們有我們所說的數據的識別字
字串 這些是通過可訪問的系統得到的
它們是識別字
例如 如果 您添加了一個按鈕 
您要找這個按鈕
鍵入識別字添加 
在您的應用程序層次結構中的元素 
應用程序就像一棵樹的根 
如果 您回想以前學習計算機科學的日子 
您就會想起數據的樹形結構 
李斯特應用中我們有一棵很簡單的樹形結構
在應用的頂部 我們有
我們有像導航欄和“添加”按鈕 
雜貨標籤 
等等 
所以每一個都是在 您的測試中
您可以參考的一個元素 
這些都是查詢用的
這個層次結構以及作爲類型和識別字
都用來尋找 您的元素 
當 您使用元素時
在 您的測試中它 們必須是獨一無二的 
所以是什麼意思？
每一個元素都是由一個查詢支持的 
查詢必須變成一個單一的實體 
否則 當我們整合事件時
要點擊按鍵 但很多個按鈕
都符合條件 所以沒辦法確定 
我們就不知道 您要我們做什麼了 
類似的地 如果 您問我們元素的屬性 
我們不知道 您到底指的是哪一個？
也許一個也不是 
所以元素查詢最重要的是
要縮小到只有一個符合的範圍 
如果 他們沒有做到這一點
當 您訪問元素時就會就會出現失敗的信息 
這有一個例外 
這是一個在XCUIElement元素上叫做
存在屬性的應用程序接口 
這讓 您測試元素存在的安全性 
您可以用這個像布魯克那樣驗證
用戶界面中被刪除的元素
您也可以用來處理
可能在某些情況下有條件的
用戶界面的案例 
例如 如果 您要保存一個檔案到一個位置
另一個檔案已存在這時會出現
確認單 
但那不會每次都出現 
只在是案件衝突的時候出現 
您可以用一個存在屬性去檢查這些情況 
元素就是事件整合應用程序接口時出現的​​ 
事件整合就是我們如何模擬用戶和應用程序的互動 
並做到系統的最底層 所以當用戶體驗的時候
所有東西都經過了同樣的通道 
整合事件的應用程序接口是有具體的平臺的
但也有些例外 
我們有按鈕點擊 如在X操作系統中
相應的 在iOS中在iOS中就是按鍵敲擊 
我們有類型文字 這在兩個平臺都是一樣的
並且是字串文字 
XCUI元素查詢Elementquery是用於指定元素的 
查詢最終變成一系列的可訪問的元素 
他們只能找到具有輔助功能的元素 
他們將在這一組中找到答案 
這意味着 您可以通過計數屬性獲得一些符合條件的答案 
您也可以通過下標和識別字
來指定不同的元素
或者使用索引裏的應用程序接口的元素
我們稍後會討論這個 
那麼查詢是如何工作呢？
我提到元素的層次結構 
這個層次結構的一方面是
如何查詢 
另一方面是過濾 
過濾是集中一個組合並
並根據特定的範圍條件減少那個組合裏面的內容 
我們再次用李斯特的例子下面是我們如何表達
某些關係 首先是後代關係 
我將展示給你們看 
所有金色的格子都是它的​​後代孩子 
另一方面孩子孩子是更具限制性的關係 
這些元素都是直接在 您查詢這些元素下面的 
所以 表格中的孩子們只是這些格子 
最後我們使用的關係是包含關係 
這個關係很有用特別是當
特別是對有些元素 如一些格子  他們沒有很多
獨特的數據 
但它們包含了獨特的元素 
例如 第一單元包含食品標籤 
過濾讓我們採取像象這種類型的元素 
或識別字在之前的
在之前的過濾的基礎上創建查詢 
這樣做的話我們可以
越過識別字直接看數值
或做部分匹配如“以您開頭”
諸如此類 
我們在應用程序接口中結合關係和過濾
第一個是descendantsmatchingtype
後代匹配類型
您能想出那是什麼 
在它的後代中尋找匹配的某一類型 
這是您將使用的最常見的查詢 
比如我能找到在應用程序中
所有的按鈕通過
通過descendentsmatchingtype後代匹配查詢按鈕 
類似的地 我可以找到表中的所有格子
我只要告訴表格
要找descendentsmatchingtype
後代匹配查詢的格子 
或者另一個與功能表項目有關的例子 
這是非常常見的查詢我們爲每一種類型
都提供便利的應用程序接口 
descendentsmatchingtype
後代匹配查詢按鈕 就變成了按鈕 
descendentsmatchingtype
後代匹配查詢格子成爲格子 等等
等等諸如此類的 
這些便利的應用程序接口能讓您的測試變得非常有效
且準確 
Childrenmatchingtype
類型是過濾關係中的中的另一組合 
所以我們要區分
子孫關係間的不同 符合條件的子孫
而且只有特定的子孫關係是孩子關係 
所有的按鈕都是Aapp按鈕
如果我想找到孩子關係的按鈕
我可以打開導航欄並說
並說說childrenmatchingtype孩子匹配類型按鈕
這雖然不如查詢那樣常用 
但有時候用於區分的時候會很有用 
最後 包含類型 
這使我們能夠找到描述 他們的後代的元素 
所以在我們有些格子裏
格子是匿名的 
他們沒有任何識別特徵 
但它們確實包含着獨特標籤 
標籤也被稱爲作爲靜態文字 
所以在這裏我可以建立一個格子查詢
去查找那些包含類型靜態文字
且識別字是雜貨的格子 
這將幫我找到第一個格子 
還有與該應用程序接口不同的屬性 
那些是我們的三個結合了關係和過濾的
應用程序接口 
後代匹配類型 孩子匹配類型 
包含類型還有所有的
後代匹配類型的應用程序接口 
另一關於查詢強大的的事情是
他們可以綁在一起 
所以我們可以採取一個查詢的輸出使它變成
使它變成下一個的輸入 就像 您一樣在Unix命令列裏
把命令都連接在一起 
這是非常強大的 並且讓 您建立
複雜的查詢 而且
而且這是很準確又而明瞭的 
所以在這裏有我們的應用
我只是想找到表中的標籤 
我從應用程序開始 
然後我到了表格 
然後我尋找靜態文字 然後就完成了 
我有這三個標籤 
有時查詢會自己結束 
您想得到查詢的計數 可能斷言的項目數量
項目數量是正確的 
但往往一個查詢目標是要找到一個元素 
我們所有的元素都由有查詢支持着 
從查詢中得到一個元素我們提供了的幾個
不同的選擇 
第一個是下標 這使我們能夠進行查詢
然後使用識別字來下標 
那應該會出現雜貨標籤 的一個元素 
也可以用元素和指數這樣做 
如果我有一套格子 也許也許一些表中的行
我想 
我可以再在一個一個地啓用元素和指數 
如果我有一個查詢我知道的唯一解決方法 
帽子是一個單一的東西 也許也許我只有一個導航欄
在我的應用程序中 我可以我可以使用元素屬性
來創建一個受查詢的支持新的元素 
我們什麼時候評估查詢？
所以 他們實際上不是真正的當您創造他們
在您創造它們的時候的評估 
它們是按需評估或者按他們的需要 
這意味着只有當 您整合事件或讀取屬性值的時候
纔會對一個元素查詢進行評估 
您可以創建元素但在 您使用 之前 
該查詢都不會被評估 
類似的地 如果 您直接創建一個查詢
當 您得到一些匹配或如果您調用一個
應用程序接口而得出所有的匹配 
則 必須是在這一點上評估
用戶界面更改時我們將重新評估查詢 
所以 您總是使用着用應用中最新的數據
而不是十秒前的數據
或2分鐘前的數據 視 您的測試長度而定
您可以思考一下查詢
查詢和元素類似於網址 
他們是有一個網址  您可以創建一個網址
但您不能立即獲取資源 
直到 您真正去創建您的網址請求
或實際網址得到解決 
即使這樣的網址是無效的 
只要沒到那個點上 都不會有錯誤提示
類似的 查詢和元素  它們只是
在測試中的應用可訪問的元素的規格 
所以創建他們
不到您要使用它們的時候不會有任何變化
等 您要使用時它們纔會做出反應 
所以這就是應用程序接口 
這三個類別：應用
是啓動 您的應用
元素像應用程序但是元素的在您的應用程序中的
中的一個代理；最後是查詢 
是用更復雜的方法指定元素 
所以現在我想我想講一下
關於輔助功能和用戶界面測試 
我之前提到過
輔助功能數據使用戶界面測試成爲可能 
所以這是不難看出輔助功能數據
的質量如何將影響 您的測試 
事實上 輔助功能數據質量越好
您就越更容易寫應用程序的測試
隨着時間的推移 這些測試也就越更可靠 
所以當 您提高輔助功能
您在您的應用程序中
就得到了雙倍的好處 
您不僅更容易爲 您自己測試
而且也爲我們的不啓用的用戶
體驗帶來了提升高 
我建議您在用戶界面測試和輔助功能工作的時候
要記住這一點 
有時需要做一些調試 
有時一個元素可能不可訪問 即使 您使用記錄功能
也不能顯示 
那可能是因爲自定義視圖子類
可能默認無法訪問 
或者它實際上不是一個視圖 
而是一個在低層圖形子系統的圖形對象
如塗層之類的 
在其 他情況下 元素是可見的
但具有較差的輔助功能數據 
我在看的所有這些包含查詢的格子
如果這些格子本身有更好的輔助功能數據
部分可能已經消失了 
當這情況出現時 我想向您指出幾點 
第一個是用戶界面記錄
因爲用戶界面記錄將向給 您最直觀地的展示
測試系統是如何看待元素的 
但除了那之外 在我們的平臺上還有輔助功能檢查員 
他們會讓 您看到的在應用程序中的
原始輔助功能數據 
當 您需要改進數據 
您第一步應該要看界面生成器 
界面生成器有很好的輔助功能檢查員
讓 您可以啓用或禁用輔助功能 
爲可訪問屬性設定值 
並配置特徵  這些特徵這些特徵對元素是如何表達的
作爲用戶界面測試的一種類型將產生有直接的影響 
如果 您是用不能訪問界面生成器的元素
您還可以使用應用程序接口 
您可以在NS可達
NSAccessibility裏用應用程序接口
UIAccessibility可達直接控制元素的
輔助功能 
所以請記住上面的那點讓我們再看一個演示 
這一次布魯克要帶我們
通過更復雜的測試再加上一點
再加上一點輔助功能調試 
-布魯克？ -謝謝 威爾 
所以在上一個演示中我們看到添加一個測試
可以添加和刪除清單中的項目 
我在這裏 我會在這個區域的用戶界面
添加更多一些測試 
首先 我要添加一個測試
讓您可以在相同的清單清單新增多個項目 
這多個項目是有相同的名稱清單 
所以我要在這裏複製上次測試的
這個編碼 
我叫這個爲新的測試測試 添加到餅乾 
我現在把編碼粘貼好了 
好
現在我有一個測試
要貼在雜貨標籤上 
接下來將要添加的新的餅乾到項目清單裏 
然後就要點擊在那個項目中的餅乾按鈕
驗證 實際上是
連接上的狀態 
所以要加上第二個項目在這裏項目我就也
我也在這裏複製這個編碼 
然後看看第二個新的按鈕也連接上了嗎 
現在我要複製這一段 
所以讓我們運行這個測試看看這是如何工作的 
現在讓我添加第一個 
第二個 
啊 斷言失敗了 
在這一行中說 我們得到的的
的餅乾按鈕的數值在在兩二次左右 
我們的實際上斷言實際上是失敗的 
看來是因爲多相匹配而失敗的 
我想我知道這裏發生了什麼 
餅乾按鈕常數是指定的 
這個只是尋找表格上所有的按鈕 
然後找到一個所謂的餅乾按鈕 
通過這一點 在測試中 
有兩2個按鈕被稱爲餅乾 
會找它們兩個但是
但只返回一個數值
因爲有兩個匹配的結果 
我現在知道了是因爲是因爲看到了測試運行 
通常 您不會是看到 您的測試運行 
所以我們認爲我們應該爲 您提供一個
可以看到測試運行的方法
我們已經在Xcode的試驗報告中添加了這個資訊 
所以如果我去報告導航欄和點擊
並點擊最近的測試報告 
您可以看到測試添加到了餅乾測試 
如果我展開這個條目  您您可以看到在測試過程中發生的
所有的活動 
在這裏我看到了這最後的一條的餅乾按鈕項目 
這是我們要找的失敗 多相匹配 
還有一個快速查找按鈕在這裏 我可以在這裏看
將顯示應用程序發生時的
確切的狀態 
正如我們所知道的原因一樣
有兩排都叫做餅乾 
其中一個被選中另外一個沒被選中 
如果我想要看到完整的斷言的話
<br/> 我可以去查看日誌
在這裏我可以展開測試日誌 
在這裏我們可以看到完整的失敗的斷言
展示輔助功能等級的的兩個按鈕 
在這裏我可以看到是的 有一個按鈕
沒有被選中另一個被選中了 
正如我所預計的一樣 
讓我們返回去去把那個問題解決好 
最簡單的解決這個問題的方法是
再次使用記錄 
我會在這個斷言失敗前設定一箇中斷點
然後在那個點那裏運行測試 
好的 所以現在我得到了我想要獲得的
那個爲被選中的按鈕的數值 
我要做的就是要點擊記錄 
點擊按鈕
停止記錄 
現在我有辦法關聯到那個按鈕了 
我要用常數用表來把這個給清除一下 
這個就叫做餅乾按鈕2 
新的測試出現了 
現在來解決測試問題我要用那個新的參考
改變以下的每一個三行 
當我再次運行測試  就應該是成功的了 
好！
好的 
現在我有一個測試可以從清單添加和刪除項目
另一個測試可在同一個清單裏添加兩2個項目的測試
並驗證它們都存在 
現在我要建立一個測試
這將清單中的所有項目都刪除 
我又一次使用記錄 
點擊雜貨標籤的編輯 然後刪除
測試行中的蘋果那行 
好吧？點擊停止錄製 
這樣的測試差不多就是我想要的 
但我想做的是 我想讓我的測試與對應用的
數據無關 
我想把所有的項目刪除 但我不想要它們
指向它們的標籤 
因爲那會變得很囉嗦 
所以首先我要做的是
您看到這些標記在這裏 
這些標記提供了獲得相同的用戶界面元素的多種途徑 
在這種情況下 首先刪除蘋果按鈕 
我可以把這個叫做
桌面按鈕table.button刪除蘋果 
我可以更具體地的
在蘋果的格子裏
說這是刪除蘋果按鈕
我就採用這個
雙擊 把它轉換爲文字 
所以現在
我有了兩2排
像以前獲得一樣的元素那樣 
我想做的是通過索引獲取格子 
我會加一個常數叫let格 表格 
並設定這個
與桌面單元table.cells元素索引相同 
因爲自從蘋果是索引1我就用那個 
我只需把那個常數
替換成這個關聯
好的 我幾乎完成了 
下一部分我需要改變的是的是如何把
按鈕從格子里弄出來 因爲其他行不
不會有刪除蘋果的按鈕 
他們會有刪除橙子或刪除麪包的按鈕 
我只需要找到那個標籤
開頭寫着刪除這個詞 
我需要使用屬性
所以在這裏
我用匹配屬性
找到了標籤
開頭爲刪除的按鈕 
所以 我最後要改變的是 
我想補充一個像之前一樣的斷言 
我想驗證一下一下在我們刪除後
那格子消失了沒 
我將使用XCTAssertEqual斷言匹配 
並斷言這些格子存在屬性返回是false否的
當我們點擊了確認刪除按鈕 
我要現在要運行測試 
蘋果那行已被刪除
但斷言是失敗的 
我可能知道是怎麼回事 
要顯示是怎麼回事現在我要將使用調試器 
我會在這裏設置一個斷點並再次運行測試 
運行到相同的斷點 
好 
在調試器中 我現在我現在啓用格子的調試說明 
調試說明有大量的信息
是關於有關如何格子是如何運作的 
因此 在我啓動它的時候時候可以看到 
這個格子第一個去應用程序裏找
然後它再到找到表格裏找 
然後到元素裏去尋找 
然後到所有元素和索引裏去找 
我可以看到 它實際上找到橙子那行 
它看起來可能是
當我們調用這個格子的的存在屬性時 
它實際上是自己重新啓動 
雖然我們除去了蘋果那排
在索引裏又有了新的格子 
所以總的來說是沒問題的 
這只是意味着我需要另外的方法來
來找出我們是否已經刪除了那行 
所以我要添加一個斷言 
斷言格子的數量
到達這一點 
所以 我要增加一個新的屬性屬性稱爲“計數”
我把這個設置爲等於表中格子的計數 
然後 斷言這等於計數減1 
現在 最後一件事我將會說這個是一個
一個刪除所有項目的測試 
把它改爲添加循環
循環 然後
只要表格裏還有一個格子
就一遍又一遍的不停循環 
讓我們來運行一下 
好的它移除了蘋果和桔子橘子那排 
好 
最後一件事就是添加一個測試
來使用在編輯界面看到的顏色那行 
我再一次使用記錄器 
我將點擊雜貨標籤和編輯 
現在
這裏的UI顏色
讓我可以改變列表的顏色 
它現在看起來是綠色的 
所以我會嘗試改變它紅色或者藍色怎麼樣？
好了 所以當我點擊這些按鈕 看起來
看起來它沒有記錄我想要的 
它看起來像是它記錄了一個
所謂的靜態文本顏色您看在這裏 
所以 我認爲可能是什麼出了問題就是
就是這些UI元素可能是對輔助功能
不可見 
所以 我要停止記錄 
我可以使用輔助檢查
來告訴我是怎麼回事 
右鍵單擊Xcode然後去開啓的開發工具 
輔助檢查 
而輔助檢查提供了大量的信息 
但我只想使用快捷方式 命令S7 
這將突出鼠標光標下面的UI元素 
如果我把鼠標光標
放在麪包這個詞這裏 按命令F7 
它就突出麪包 
如果我把它放在麪包刪除按鈕這裏 
您可以看到 它突出了這一點 
現在 讓我們看看如果我把鼠標光標
放在這個黃色按鈕會發生什麼 
啊哈！它突出了整排 
所以這幾乎證實了
這個UI元素根本對輔助功能是不可見的 
幸運的是 我可以用故事板
改變這種情況 解決這個問題 
我現在打開故​​事板 
在我的故事板這裏我有同樣的按鈕
如果我打開檢查 我可以看到
這些按鈕實際上有一類的可點擊的顏色視圖 
我熟悉這個類別 
我知道它實際上不是用戶界面按鈕 
這是自定義視圖如果我再往下輔助檢查的部分
我可以看到它是沒有被啓用 
我已經過了一遍並且並且添加了標籤 
爲了解決這個問題  我需要做的我需要做的是選擇所有的按鈕 
然後我會啓用輔助功能的選框 
由於它他們像按鈕 
我糾結要不要給它們按鈕的特性 
好吧？
現在讓我們再來運行這個應用程序 
而現在我要再次記錄這個測試 
點擊雜貨和編輯 
然後紅色  然後橙色 
黃、 綠、 藍和灰 
好  它實際上記錄所有這些 
我會停止記錄讓我們來運行它看看
它是否可以回放 
好  我已經修復了訪問我的應用程序 
而且我也讓它變得更容易測試 
如果我要完成這一測試 
我可能會增加一些斷言驗證
這些按鈕的變化的狀態 
現在 我將舞臺還給威爾 
所以這所以這真的挺棒 
尤其是使它變得多麼的簡易
以前配音用戶用戶沒能那麼幸運地
做到這些  現在只是現在只是在界面生成器做了
幾個簡單的變化布魯克能夠使
能夠使它變得可訪問並和UI可測 
因此 在演示中 更先進的UI測試 
您看到在一些情況下它如何處理衝突
和一些個查詢  以及如何以及如何糾正這些查詢 
以及如何調試它 如何建立循環
並對其進行驗證  以及如何還有如何使用存在的屬性
並且還強調如何重新評估查詢 
他們用標準創造了它們 
這標準就是確定怎樣重新評估 
我們使用索引1一的元素 
這裏要指出的是  蘋果蘋果標籤在第一時間通過UI改變後 
UI改變後它就馬上消失了 
現在被指向橘子標籤橘子標籤 然後最後 
如何提高輔助功能 
這樣做的回報是非常棒的 
布魯克也給你們看了一眼測試報告 
我們在Xcode 7做了一些努力來
檢修它他們的UI測試 
概括總括來說就是  測試報告測試報告就是所有的運行測試
您看到的結果 
它顯示了通過或失敗失敗 失敗消息 
性能測試的
性能指標都顯示在報告裏 
您在XCode和Xcode Server裏得到相同的用戶界面 
這是一個一致的經驗
不管您是否正在尋找整合或
您在本地計算機剛剛做的運行 
在Xcode Server您也能獲得每個設備的結果 
因爲您可以有設備能可以同時
整合多種設備 
對UI測試的一點補充一點是 
我們在UI測試中收集了多餘的數據 
這包括屏幕截圖 
您看到了它是如何幫助布魯克調試他的查詢衝突
通過在查詢失敗時拿出屏幕截圖 
此外 我們還整理了應用程序接口調用進入這些嵌套活動
來幫助您瞭解應用程序接口調用是如何工作的 
讓我們一起來看看這樣的一個例子 
這不在名單草案裏 
它是一個不同的應用程序 
但我要告訴您在嵌套的活動
幾個步驟是如何分解的 
這個例子我們我們輸入到測試現場
然後所以您就可以調用高層次的應用程序接口型式測試 
但在內部裏它已經分解了 
在第一步我們等待應用程序空閒下來 
我們實際上觀察測試的應用程序的
主運行循環 
因爲我們不希望在它忙於處理的時候 
發送事件給它 
我們希望它是儘可能快速響應的 
一旦它的閒置 我們就從輔助功能那捕捉到我們的數據
然後我們啓動查詢 
確保它的匹配正好是一個 
下一步  我們綜合我們綜合真實事件
<br/> 在該區域插入文本 
最後 我們在應用程序空閒之後再等待多一點的時間 
因爲 再一次 我們要我們要以可靠的和確定的方式
掌控 
快相是在關鍵的步驟
截屏用的 
您可以在這裏看到我輸入的文本後的狀態 
確保一切都和您預計的樣子一樣 
因此 UI測試顯然是那種您可以爲你您的應用程序做的
巨大的擴展 
所以您在想什麼時候用它呢 對嗎？
我們已經有單元測試了 
UI測試是一種補充測試測試 而不是替代 
您應該對您的模擬的目標繼續使用單位測試 
和您的控制器邏輯 
因爲單元測試將更能精確查明在您的代碼中
出現的故障 
UI測試可以讓您覆蓋更廣泛的功能範圍
但跟蹤故障
卻更能會比較困難 
這是在您的項目的單元測試之間和UI測試之間 
尋找合適的平衡 
適合UI測試的人選 
嗯 想想您的應用程序 
您有用戶客戶 您展示給他們看 
您很少能展示一系列的演示給他們的 
您給他們過一遍後說“好 
這是您要怎麼做” “ 
一系列的演示是UI測試的很好的候選人 
經過每日每夜的構建之後
您會知道這些演示非常有用 
第二 除此之外 常見的工作流程 
如果它是一個編輯應用程序 那麼這個應用程序是做什麼用的
您如何編輯文檔 
任何自定義視圖 
最後基於文檔的工作流程工作流程 打開和保存 
這些都是可以自動化的很好的事情 
它他們如果進行單元測試的話的話會很難捕捉 
如果它他們出錯了會對用戶產生巨大的影響 
因此 UI測試 
在新的XCode 7中 
開啓打開了您如何測試您的應用程序的
的各種可能性 
在UI測試您您查找並和與用戶體驗元素互動
互動和您整合事件
驅使它他們  就是些就是些普通用戶會做的事情 
您可以驗證的用戶界面屬性和狀態 
和UI記錄讓您超快速地創建這些測試 
超級簡單 
最後 我們已經徹底改革了了測試報告
讓您能更好地瞭解您的測試是如何工作的
並收集更多關於它他們的數據 
所以這就是UI測試 
那麼關於更多的信息我們已經上傳到XCtest 
XC測試上了 
您可以在通過Xcode和我們的網站中得到它 
輔助功能也有很好的的文件 
我建議你們去看看 
開發者論壇是提出問題與交流技巧和與其他
您如何使用方法的好地方 
我們的宣傳員傳道斯特凡·萊斯是一個可以幫您開始使用的
很好的聯繫人 
這裏也有一些相關教程如果您稍後要觀看的話
可以觀看昨天早上的關於關於輔助功能的教程 
如果想的話也可在您的午餐時間觀看
持續整合、代碼覆蓋率 新技術
在Xcode Server上您可以在看明天下午觀看 
希望每一個人都有很大收穫 