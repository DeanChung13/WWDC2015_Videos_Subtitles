早上好！
欢迎来到iOS之Accessibility
我的名字叫伊恩·菲什
我是一名工程师来自Accessibility 团队
可及性指的是确保所有用户
无论他们是否身患残疾都能充分享用我们的每款产品
以及你们的apps中的各项有趣的功能
这就意味着我们得专注于用户身上 想想身患各种残疾的
用户是如何使用这些这些功能的
反过来 这种思维方式也使得Apple能开发出一些绝妙
功能来帮助用户
就像你们看到的这位女孩
头上佩戴一个开关 然后她就可以
控制iOS的各项功能了仅仅需要一个按钮就可以了
她就可以自由自在地进行沟通、玩耍
而无需借助他人的帮助
随着用户的年龄增大越来越多的用户需要
借助这些辅助功能
所以 现在真的是时候考虑
下你的app的可及性 如何了
这也是Apple开发这些奇妙的辅助功能的原因
但是这还不够
我们需要你们的所有的app都是易用的
这样我们才能创建一个美妙的可及性的生态系统
方便这些用户使用
今天 我们将讨论下Apple在iOS上提供的
辅助功能
我们会看看iOS 9有什么新特性
然后我们会再看看如何检查可及性
我们会一起看一个app
看看已经实现的可及性有哪些
然后我们再一起看看如何增加这个app的
可及性
不过首先让我们看看
Apple提供的辅助功能有哪些
我们把这些功能分成四个大的方面：
听、学、
视力、运动和动作
我会讲一下我们已经有的几项辅助功能
但是时间限制 今天我不能把所有的辅助功能都讲一遍
对于"听"来说 我们有iPhone专属助听器
它从用户的iOS设备那里把高品质的音频直接"流入"
用户耳中 用户也就可以控制这些助听器上的各种设置
这样 用户就不必再随身携带各种各样的
硬件了
他们设置助听器或者调整助听器的设置 也就
更加私人化了
对于"学"来说 我们有"指导性访问"功能
这样教师、父母、看护人就可以避免用户分心
让用户把注意力集中某个特定的app或者任务上
我们甚至还允许设定
"时间限制" 这样你就可以对某个任务的时间做出限定
对于开发者来说 我们有一个API 允许你给你的
app做出非常具体的限定
对于"视力"来说 我们有VoiceOver 盲人和
低视力用户就可以通过触摸屏幕 让
VoiceOver把他们手指下的内容读出来
这样 即使他们看不到屏幕也可以通过手势
和触摸屏进行交互
我们还有"缩放"功能 那些能够看到屏幕 但是需要
上面的内容放大一点的用户
就可以把你的app内的界面和操作系统
进行放大
甚至在你打字时 它还会跟随文本 而不会
放大键盘
这样就不会妨碍你使用键盘
最后 对于"视力"来说我们还有"设立调节"功能
方便那些需要文本更大、对比度更高、运动更失真的
用户对界面进行调整
这样用户能更轻松地适应屏幕上
的内容
对于"运动和动作"来说我们有"开关控制" 它可以
它使用这些开关或者大按钮
来控制操作系统
对于那些不能和触摸屏充分交互的用户来说
这个功能很棒 有了它他们就可以
依次在屏幕上的项目之间进行导航
执行一些复杂的手势甚至还能玩游戏
如果用户执行这些手势有困难 或者按下某个
实体键有困难 我们还有AssistiveTouch
提供一项菜单 让用户快速访问录制的手势
和硬件按钮
它甚至还能兼容第三方辅助设备 如轮椅等
iOS9中还有一项新特性即"触摸调节"
它可以通过改变触摸屏对触摸的反应 帮助那些执行精确的
手势有困难的用户
在这里 我想给你们做一个演示
和所有的辅助功能一样
你可以在"设置"-"通用"-"辅助"中打开 "触摸调节"
在这里你可以看到我们提供了一系列的
辅助功能
现在 我们进入"触摸调节"
你可以看到 我们有三个选项
让我们来看看"控制时间"
有了它 那些身体有震颤、经常误碰屏幕的用户 就
可以设置一个超时 这样
就可以让部分屏幕触碰失效
我们现在打开"控制时间"和"触摸调节"
我先返回"主页键"你会发现
当我把手指放在屏幕上时会出现这个定时器图标
如果时间没走完我就松开手指的话
这次触摸就不会生效
但是 如果我点击屏幕并保持手指不动 那么时间走完后
这个app就打开了
这样的话 如果我有震颤它们也不会被识别为触摸
好极了！如果我们返回"设置"
我们可以看一下"点击辅助"功能 它非常适合那些
无法精确地点到他们想点的图标上面的用户
如果我们返回"主页键"
你可以看到 如果我按下"时钟" 然后再移动到
"日历"上 触摸就在日历而不是时钟上生效了
这次触摸最后生效的位置就是"日历"
这就是iOS 9上的"触摸调节"
因此 许多这些辅助功能
都要依赖UIAccessibility
来消除辅助技术和你的app之间的差距
举例来说
如果一个VoiceOver用户点了一下触摸屏
它将会查找用户手指下的元素 然后
请求该元素在你的app中的辅助标签
所以 当你返回字符串Weather时
-Weather-Weather
同样还有 "开关控制"
"开关控制"用户打开你的某一元素上的菜单
然后请求该元素的
可及性自定义动作
当你返回动作后 可以是移动、传递和交易
也许这是个游戏app 那么
它将把这些动作显示到"开关控制"菜单中
用户就能够快速访问你的app的元素上的
这些动作
你会发现UIAccessibility就是在
问一些你的app上面的元素相关的问题
这样辅助技术就知道该如何配合工作
让我们来看几个问题
第一个问题是：我有某个特定用途吗？
这个问题问的是某个元素对用户来说 是否有用、
是否重要
因此在一个视图中用一行来对元素进行分割
在视觉上就非常重要
但是 因为用户不能和它进行交互
它也不能提供UI标签之类的信息
因此 它并无某个特定的用途
所以我们来回答下这个问题："辅助元素"
我们可以看一下"时钟"那里的加号按钮 是一个按钮吗？
用户可以和这个按钮进行
交互 因此我们回答"是的"
第二个最重要的问题是：我的名称是什么？
我们用"辅助标签"来回答
VoiceOver就是使用这一标签
向用户读出他们手指下的内容
我们看下加号按钮你可能想把
标签设置成"添加新时钟按钮"
这样可以很好地描述按钮的功能
但是多想想辅助标签而不要仅仅考虑
按钮的标题 因此
只保留"添加"才是一个更好的辅助标签
那么你的app中的元素有什么样的个性?
这与如何向用户描述某个功能、如何告诉辅助技术
怎样和某个元素进行交互都是息息相关的
我们用"辅助特质"来回答
我们有很多特质
你可以设置到元素上 描述
应该如何与它们进行交互
我们在看看"时钟"这里的"加号"或"添加"按钮
我们就可以把特质设置成"按钮"因为它就是一个按钮
VoiceOver也会把它读作一个按钮
接下来的问题是：我有什么样的价值?
如果某个元素的状态
经常发生变动
我们就可以在"辅助值"中进行更改或更新
这次我们来看看"时钟"元素
发生更改的值是时间 那么
我们就可以返回字符串"上午11:20"
然后在时间发生变更时相应地做出更新
接下来的问题是：人们应该如何与我进行交互?
如果"特性"不足以描述某个元素的交互方式
你需要更多的信息时
你可以在"辅助提示"中提供这些信息
我们可以看看"世界时钟"的把手
我们可以把提示设置成像"上下拖动把手改变顺序"这样
这样 用户就可以准确知道
他们应该如何进行和它进行交互
就是这样一个与它的用途相关的简短的说明
最后一个问题：我在哪里？
你可能已经注意到"开关控制"和
VoiceOver上面都有光标
在屏幕上动来动去
因此我们就需要知道应该把这些光标显示到什么地方
我们用"辅助帧"来回答这个问题
我们就是这样绘制你们在这里看到的这个美丽的光标的
要记住
帧位于屏幕坐标内 所以我们提供了一项辅助方法 帮助
大家把视图中的帧转换为屏幕坐标
大多数情况下 我们假定帧是位于某个视图上的
所以你并不需要触摸这里除非你需要它
是某个更加具体的东西
这样就可以了！
这六种方法就构成了
UIaccessibility的基础API
这就足以实现大部分的辅助功能了
花几分钟 简单写几行代码就可以
大大提高你的app的可及性
当然了 真正的好消息是：大部分工作是由我们来完成
如果你用的是UIKit中的标准控件 那么大部分工作
都不需要你亲自完成
如果你需要进行自定义绘制
那么我们就需要你回答这些问题
这样身患残疾的用户就能知道如何与你的app进行交互
在这六种方法上的小小投资能够给你带来巨大的回报
能够让很多人可以用
你的app
所以提高可及性也并不复杂
现在你这样想：可及性 只需要六种方法
小菜一碟 具体我该怎么做？
第一步 设计时就要考虑到可及性
当你在设计app时
当你在考虑用户如何使用你的app时
你要考虑到"开关控制"和VoiceOver用户
考虑到他们会如何与你的app进行交互
但是 如果你已经做好了一个app
我们猜你们大多数人都是
这样 那么最适合你们的就是对你们的app进行一次
核查 看看已经实现的可及性怎样 因为就像我说过的
如果你用的是UIKit标准控件的话
那么大部分工作都不需要你亲自来做
进行可及性核查的方法有这么几种：
第一种方法是使用模拟器中的可及性
检查器
你可以到"设置"-"通用"-"辅助功能"中
打开检查器
然后你会看到它弹出了一个漂亮的窗口 对我们之前谈到
的六个问题做了回答
这样你就可以快速抽查你的app中的元素
确保它们能够正确做出响应
检查可及性的最好方法是使用设备上的
辅助功能
比如VoiceOver和"开关控制"之类的辅助功能
现在 我来和你们一起试一下
回到"设置"中
我们可以在"辅助设置"顶部打开VoiceOver
不过如果你之前没用过VoiceOver
那么我建议你到
辅助功能快捷方式中打开VoiceOver
这样你就可以在操作系统中的任何地方点击"主页键"
三次 这样就可以打开或者关闭VoiceOver
如果我们返回"主页键"
我会点击"主页键"三次
现在VoiceOver告诉
我们它正停留在"消息"界面
我就可以用指头在屏幕上动来动去
而VoiceOver就会把我指头下面的内容读出来
天气 时钟 地图 视频
Wallet 股票提醒 有两项任务尚未完成
双击打开
我今天还有任务未完成
好的 我伸出一根手指向右滑动
-然后它就移动到了下个元素上-股票
双击打开
现在股票情况如何？
如果我伸出一根手指
向左滑动 然后它就移动到了上一个元素上
一根手指双击 会激活一个元素
然后会弹出提醒
你需要用到的其他手势
就只剩下三指滚动了
我伸出三个手指 就可以滚动下个元素 滚动
上个元素就这样
就这几个手势就可以控制VoiceOver了
你就可以检查下你的app的可及性到底怎样
我们来看看"时钟"检查下它的可及性怎样
时钟 上午9:15
双击打开
双击打开
时钟 编辑 按钮
当你核查可及性时
你想看看是不是各个项目都有一个辅助标签
是不是都有一个有意义的值
如果它的状态变了 你就得查看下元素 确保
确保顺序仍然正确
一般来说 如果你的语言的顺序是从左到右 你需要
从左上方看到右下方；而如果你的语言的顺序是从右到左
你把顺序反过来就可以了
我们看一下 听听
VoiceOver在这个app中找到了什么
世界时钟 标题
库比蒂诺 今天
上午9:16
向上或者向下滑动选择一个自定义操作
然后双击激活
VoiceOver现在把标签和值告诉我们了
纽约 今天...
已选中 世界时钟点击 标签 104
这里有"已选中"特质你又有了一种可以添加的特质
它告诉我们 在标签栏这里还有三个元素
闹钟 标签
秒表 标签
计时器 标签第四个 共四个
我滑动到"世界时钟"中的各个位置
最起码可以滑动到屏幕的
每个位置 每个项目都有标签 都有一个有意义的值
特质设置的没问题
看起来可及性不错很好
-现在我把VoiceOver关掉-VoiceOver已关闭
我们来看看这款"Quake Watch"的app
我现在位于湾区 这意味着我离地震很"近"
所以我写了一个app 它能够对世界上发生的
地震进行追踪
非常适合像我这样的本地人
你可以看到正在发生的地震、近来刚刚发生过
的地震
它可以告诉你地震发生的地点、时间
文本颜色还可以告诉你地震的震级
我们甚至还有一个地图视图
如果我点进来 我就可以在
地图上看到某次地震我缩小下
我就可以看到其他地震了我可以点击
获取关于某次地震的详细信息
这里甚至还有一个信息按钮它会把我带到
美国地质勘探局 让我获取更多信息
我可以点击并按住一组地震 把它们添加到
我的收藏夹中 对比这些地震
这个app很棒吧？
这是我见过的与地震相关的最好的app
如果我连续三次点击VoiceOver
我们看看VoiceOver用户
在这个app中能看到什么
VoiceOver已经打开QuakeWatch 地震 标题
地震 标题 进展不错
收藏夹 按钮
收藏夹 按钮 很好
这些都是标准UIKit控件
我可以免费使用
很好
现在 我伸出一根手指四处滑动下
看看这些单元格中都有什么
你听到的这种声音是VoiceOver在告诉你
VoiceOver在你的手指下未能
找到可以触摸的内容
这些单元格是不可及的
这可不好
我们再到"收藏夹"中看看图表
看起来图表也是不可及的
真不幸
图表 真的很漂亮
当你在检查你的app时还有一个手势 很有用
你可以双击并按住不放
此时VoiceOver就会生效按到你指头下的任何内容上
所以 即使某个单元格是不可及的
我们也可以跳进来 并且...
地震 显示更多信息 细节
回到视图
细节 地震 后退按钮
地震
显示更多信息
使用旋转功能查看你感兴趣的点
-好的-地震
-很好-位置 74千米
没有人感受到这次地震
震级1.5
关闭弹窗
双击...
看起来信息按钮是不可及
所以VoiceOver没有看到这个按钮 因此
对于一个VoiceOver用户来说 可及性还是不高
他们不能获取这些信息
因此用处不大
-我们把VoiceOver关掉-VoiceOver已经关闭
那么我们在可及性审查中发现了什么问题？
地震单元格不可及因此
VoiceOver根本就看不到
用文本颜色来表示震级这也不是
表示震级的最佳方法
因为并不是每个人都能看到各种颜色
这看起来也很丑很难看清
就像你看到的这个黄色一样
地图详细视图中那些标签需要
更加具体地表明它们的用途
信息按钮对VoiceOver用户来说 是完全
不可见的
这可不好
不过好消息是 我们之前谈到的六种方法
足以对付这些问题
只要花几分钟 写几行代码就可以搞定
我们一起来试一下
这是QuakeWatch首先我们来看看
地震单元格
地震单元格是用Swift写成的 项目的其它
部分是用Objective-C写成的
辅助功能够兼容这两种语言
它能像你的代码的一部分一样共存
我们来看看
这是不可及的
如果我们向下看 我们就可以
发现 不可及的原因是因为我选择了一个字符串然后又
在某一点把它取出了
那么 如果我使用UI标签来取代它 它就变得可及了
但是 因为我直接把字符串拖到了视图中 因此它还是
不可及的
现在 我把提醒用的颜色当成这些字符串的
文本颜色来用
我们首先要做的 是把它去掉
使用UI颜色 即黑色来取代它
现在 我们就都可以识别出它了
很棒吧？
既然我们已经不用它来表示震级了
我们就同样可以添加一个震级字符串
并把这个字符串拖到视图中
为什么不呢？好的
这样文本颜色就搞定了
我们怎样让它变得可及？
如果我们到这里 到单元格中地震设置那里
我们就可以
获取地震发生的日期
这里有一个很方便的事件描述 它可以告诉我们
地震发生的时间 正确规定它的格式 就应该这样
我们把单元格上的"是否为辅助元素"设置成"是"
VoiceOver就能够找到它了
然后我们再把标签设置成刚刚创建的描述
好了 好极了！
我们剩下要做的 就是给那个收藏夹添加
一个值
当你向某个收藏夹中添加东西的时候
VoiceOver用户当然想知道添加了什么
我们在下面可以切换收藏夹
我们可以添加一些代码
给收藏夹设置
辅助值
现在我们到弹窗视图中看一看
我就知道它在这儿
看起来那个按钮就是一个UI控件
它会告诉我们不可及的原因
如果我一开始就用了一个UI按钮 那么这里一开始
就是可及的 不过我们现在需要一点帮助 才能让它
变得可及
我们现在试一试
我们先获取"更多信息"按钮 把"可及性"设置为
"是" 添加按钮特质然后把标签设置成
"更多信息" 并且把提示设置成
"双击查看更多信息"
当然了 这里你需要随机应变
不过现在就先这样吧
在这里 我们剩下要做的
就是设置位置上的"标题"
特质和感受到地震的人数的标题 这样视图中就
一目了然了 传递的信息也非常清楚
短短几分钟就搞定了并且也解决了
一些问题
我们编译下看看
好的我们连续三次点击
"主页键" 重新打开VoiceOver
VoiceOver已经打开FaceTime
QuakeWatch
-我们打开QuakeWatch-双击打开
QuakeWatch地震 标题
你首先会注意到那个丑陋的黄色终于消失了
谢天谢地！
我们再用一根指头到处滑动下 看会发生什么
收藏夹 按钮 12千米
俄克拉何马州 2015年上午10:57...
现在地震可以读取到单元格了
如果我们再到"详细视图"这会很不错
关闭地震 位置 标题
现在"位置"有了标题特质那么视图中发生的事情就很清楚了
12千米感受人数 标题 零人
震级3.00
-更多信息 按钮-更多信息 按钮...
双击查看更多信息
...现在"更多信息"按钮也可及了
它还告诉我们应该怎么用它的用途是什么 好极了！
短短几行代码
我们就能把这个app搞定大大提高它的可及性
我们现在进展怎样了？
现在地震单元格已经可及了
我们也不再使用文本颜色来传递任何信息了
很好
那个丑陋的黄色终于消失了
现在地图的"详细视图"上面的标签也有了
有意义的特质 因此
VoiceOver用户就知道现在发生了什么
如果愿意的话 他们还能通过标题进行导航
信息按钮已经可及了
我们还需要找到向收藏夹添加东西的方法
因为收藏夹图表还是不可及的
我们怎样才能让图表变得可及呢？
我们先回到我们之前讨论过的问题
第一个问题是：我有某个特定用途吗？
这个图标中传递了很多信息
但是并不是所有的信息都有某个特定用途
或者对用户有什么重要作用
那么这个图标中最重要的信息是什么？
我认为是这些点
因为这些点可以告诉我们我们正在对比什么
因此 我们也许应该让它们变得可及
下一个值得思考的问题是：我在哪里？
我们应该把这些点的辅助帧设置成
什么？
你可能会认为
你现在正在看的橙色框很合适
但是如果你从整体上看这个视图 你会发现
它们大部分都是不可及的
因此大部分都是无效空间
这样VoiceOver用户用他们的手指四处触摸屏幕
搜索点的时候 他们基本上找不到任何点
这种帧可能会更好
VoiceOver用户可以用他们的手指滑过屏幕
然后这样他们就可以触摸到各个点
只要我们给震级设置辅助值 那么
就万事大吉了
所有的信息都在
这个方案看起来不错
不幸的是 我碰巧知道
图标视图是个很大的视图
所有事物都与视图直接相关
那么我们怎样才能让一个视图在各个部分中都可及呢？
好消息是 我们同样也有一个针对这种情况的API
UIAccessibility元素
有了它 我们就可以为可及性创建特定对象
把一个视图分成几个子元素 同时
还不影响答复我们之前讨论过的那六个问题
新增的部分是辅助容器
你可以把它设置成包含视图
好极了！
有了这个API 我们就可以让图表变得可及了
我们怎样才能向收藏夹中添加东西
让图表中显示某些东西呢？
关于这点 我想我们可以使用"魔力辅助触摸"
这是一个很酷的API
能够在正确的环境中做正确的事
这里有一个很好的例子
当VoiceOver用户收到来电时
他们可以使用"魔力触摸"用两根手指双击
屏幕 然后奇迹就会发生
电话接通了
这样 我们就找到了向收藏夹添加东西的方法 不过
我们要向收藏夹中添加什么？
为此 我们可以使用一些iOS 9上面的全新的API
名字叫Accessibility Focus
有了它 你就可以为某个给定的辅助技术获取
当前聚焦的元素
像VoiceOver或者"开关控制"之类的辅助功能
当焦点在你的app内移动时如果你想对焦点进行跟踪
我们会进行通知 告诉你对某个给定的辅助技术来说
当前聚焦的元素是什么 之前聚焦的元素
又是什么
我们知道了向收藏夹中添加什么东西
怎样添加 那么我们就可以试试图表了
现在 我们来试着实现一下
好的
回到Xcode中
我们向收藏夹中添加一些东西
如果我们来到appdelegate这里
我们就能添加"魔力辅助触摸"
我们可以为VoiceOver获取当前聚焦的元素
看看元素是否会对收藏夹切换做出响应
像单元格一样 如果做出响应了 我们就会把它当成
收藏夹切换 并返回"是"
否则就返回"否"
这样VoiceOver就会在那种情景下做出另一个奇妙
的事 现在先不说
这样 我们就能向收藏夹中添加东西了
现在 让我们看看图表
好的
看起来我是在用CAShapeLayer进行绘制
CAShapeLayer很适合绘制图表
但是并不适合绘制可及性高的图表
那么在下边这里 我就可以真正抓住这个点
然后进行绘制
这样看来 这里非常适合创建
我的UIAccessibility元素
那么我就创建一个UIAccessibility元素
把它的容器设置成
"自己" 也就是图表视图
然后我再把它的标签设置成一个日期的格式化版本
我们就可以知道发生的时间
我们把值设置成震级描述
很好
然后 像我们之前说过的那样 我会获取帧 然后把它
设置成比项目略宽 、
图表全高
当帧转换成屏幕坐标后 我就会
进行设置
最后再把它添加到我准备就绪的阵列中
并且把它设置成图表视图的
辅助元素
就是这么几行代码就搞定了
我们再来看看怎样了
我先连续三次点击"主页键"打开VoiceOver
VoiceOver已经打开FaceTime
QuakeWatch双击打开...
QuakeWatch 地震 标题
那些漂亮的单元格在这里
我会使用"魔力触摸"手势用两根手指双击屏幕
6千米...
好了现在这是一个收藏夹
12千米...6千米...
加利福尼亚州 2015年
上午11:10 收藏夹
-它说这是个收藏夹 很好-12千米...
让我们添加一些东西
首先...
-我们要等着地震发生-160...
好的 三次应该就够了
细节 后退按钮
我们来看看当我们滑动图表时会发生什么
细节 2005年 2月5号
2005年 2月5号
11-106 am 太平洋时间
震级0.43
当我用手指滑过时我应该会全部点到它们
2005年 2月5号
这样你就可以让一个图表变得可及
最起码 能让一个地震图表变得可及
就是这么几行代码我们就能搞定这些事情
我们再来看一个
现在地震单元格已经可及了
而且不用再借助黄色了谢天谢地
地图细节也变得可及了
我们可以借助"魔力触摸"添加一个收藏夹
我们甚至还能进一步探索图表 对比地震
最起码 可以对比我们最喜欢的地震
就是这么几行代码就是这么几分钟
我们就可以把一个
对VoiceOver用户完全不可用的app
变成可能是可及性最高的地震追踪app
记住用户需要可及性
考虑下 各种身患残疾的用户是怎样
与你的app进行交互
记住 使用你的app的每个人 都能像你设计的
那样 使用你的app
长期以来Apple一直在拥抱 可及性
我们期望
我们的产品 研发的各项功能都是完全可及的
我们也一直在努力实现这一点
我们想要去你们加入进来
创造一个真正可及的整体生态系统
如果你想获取更多信息
你可以在developer.apple上面
搜索UIAccessibility或者
访问开发者论坛
今天晚些时候 我们还有一个Apple Watch讲座
之后还有一个
Accessibility和Speech Lab讲座
你可以把你的app带过来
我们会帮助你把你的app的某些部分变得可及
或者你可以和一个可及性方面的专家坐到一起
对你的app进行一次核查
看看已经实现的可达性有哪些
我们期待在那里与你们相遇
谢谢！希望会议过得愉快